---
title: A Tidyverse Primer
author: David Kane and Pratham Kancherla
tutorial:
  id: a-tidyverse-primer
output:
  learnr::tutorial:
    progressive: yes
    allow_skip: yes
runtime: shiny_prerendered
description: 'Tutorial for Chapter 2: A Tidyverse Primer'
---

```{r setup, include = FALSE}
library(learnr)
library(tutorial.helpers)
library(tidyverse)
library(tidymodels)
knitr::opts_chunk$set(echo = FALSE)
options(tutorial.exercise.timelimit = 60, 
        tutorial.storage = "local") 
```

```{r copy-code-chunk, child = system.file("child_documents/copy_button.Rmd", package = "tutorial.helpers")}
```

```{r info-section, child = system.file("child_documents/info_section.Rmd", package = "tutorial.helpers")}
```

<!-- DK: Fix introduction.   PK: Done-->

<!-- Use this order: -->

<!-- mtcars -->
<!-- mtcars[1, ] -->
<!-- mtcars[c(2, 4), ] -->
<!-- mtcars[c(4, 2), ] -->
<!-- mtcars$gear -->
<!-- order(mtcars$gear) -->
<!-- mtcars[order(mtcars$gear), ]   PK: Done.-->

<!-- Do Summary.   PK: Done -->

## Introduction
### 

This tutorial covers [Chapter 2: Tidyverse Principles](https://www.tmwr.org/tidyverse.html#tidyverse-principles) 
from [*Tidy Modeling with R*](https://www.tmwr.org/) by Max Kuhn and Julia Silge. We briefly discuss important principles of the [**tidyverse**](https://www.tidyverse.org/packages/) design philosophy and how they apply in the context of modeling software that is easy to use properly and supports good statistical practices. Both **tidymodels** and the **tidyverse** build on the R language, and [**tidymodels**](https://www.tidymodels.org/packages/) applies **tidyverse** principles to building models.


## Tidyverse principles
### 

The full set of strategies and tactics for writing R code in the *Tidyverse* style can be found at the website https://design.tidyverse.org. Here we can briefly describe several of the general *Tidyverse* design principles, their motivation, and how we think about modeling as an application of these principles.

### 

### Exercise 1

First, load the `tidyverse` library.

```{r tidyverse-principles-1, exercise = TRUE}

```

```{r tidyverse-principles-1-hint-1, eval = FALSE}
library(...)
```

### 

At first we will not be using the **tidyverse** functions, as we are trying to understand the core language of R. We will be using data frame `mtcars` to understand this language.

### Exercise 2

Type `mtcars` and hit "Run Code."

```{r tidyverse-principles-2, exercise = TRUE}

```

```{r tidyverse-principles-2-hint-1, eval = FALSE}
mtcars
```

### 

`mtcars` is an R data frame with information about 32 cars. 

### Exercise 3

Next, we will extract the information regarding the first row of `mtcars`. In square brackets, next to `mtcars`, put `1,` and hit "Run Code."

```{r tidyverse-principles-3, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r tidyverse-principles-3-hint-1, eval = FALSE}
mtcars[1, ]
```

### 

We can now see that every column of the first row in `mtcars` is printed.

### 

### Exercise 4

Next, we will try extracting the second and fourth row. Copy the previous code from before and inside the brackets, select the rows `2,4` using `c()`. Remember to use a `,` after you put the vector in the bracket.

```{r tidyverse-principles-4, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r tidyverse-principles-4-hint-1, eval = FALSE}
mtcars[c(2,4),]
```

### 

Now you can see every column printed for the second and fourth row of `mtcars`. You can also try other values to obtain the rows desired.

### 

### Exercise 5

Now we will look at the `gear` column in `mtcars`. Run the code below.

```{r tidyverse-principles-5, exercise = TRUE}
mtcars$gear
```

### 

The `gear` column from `mtcars` should be printed on your screen.

### 

### Exercise 6

Now we will sort the data frame by the column `gear`. We can do this by using the `order()` function. After copying the previous code, put `mtcars$gear` in `[]`. Don't forget the `,` after the order() expression!

```{r tidyverse-principles-6, exercise = TRUE}

```

```{r tidyverse-principles-6-hint-1, eval = FALSE}
mtcars[order(mtcars$...),]
```

### 

As you can see, the mtcars data frame column `gear` is ordered from descending order using the `order()` function.

### 

### Exercise 7

Copy the code from above and order the `mpg` column as well by adding it to the `order()` function. Don't forget the `,` after the `order()` function!

```{r tidyverse-principles-7, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r tidyverse-principles-7-hint-1, eval = FALSE}
mtcars[order(mtcars$gear, mtcars$mpg), ]
```

### 

We have now successfully order the data frame `mtcars` by `mpg` and `gears`. You can see that for each `gear` value, the `mpg` is in descending order.

### 

### Exercise 8

Run the code below.

```{r tidyverse-principles-8, exercise = TRUE}
arrange(.data = mtcars, gear, mpg)

```

### 

Notice that the output is the exactly similar in Excerise 4. This is the way order a data frame using the `tidyverse` function `arrange()`.

### 

Great job! You have learned the core language of R and compared its functionality to the `tidyverse` package.

### 

## Reuse Existing Data Structures
### 

Whenever possible, functions should avoid returning a novel data structure. This reduces the cognitive load when using software; no additional syntax or methods are required.

### 

We will be using the `rsample` package to give an example of using existing data structures that make statistical calculations happen quicker and more efficient.

### 

### Exercise 1

Load the `rsample` library.

```{r reuse-existing-data--1, exercise = TRUE}

```

```{r reuse-existing-data--1-hint-1, eval = FALSE}
library(...)
```

### 

### Exercise 2

Get a better understanding of the `rsample` library by typing in `?rsample` into the console. Look at the description in the help tab. CP/CR.

```{r reuse-existing-data--2}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

The `rsample` package makes it easier to store data. Resampling allows us to  make more accurate predictions and gather more information about a sample.

### 

One resampling method is called bootstrap, which is resampling a single data set to create many simulated samples. This can be done by using the `bootstraps()`

### 

### Exercise 3

Find out more about `bootstraps` by typing `bootstraps`in the console. Look at the description. CP/CR

```{r reuse-existing-data--3}
question_text(NULL,
	answer(NULL, correct = TRUE),
	allow_retry = TRUE,
	try_again_button = "Edit Answer",
	incorrect = NULL,
	rows = 3)
```

### 

### Exercise 4

We will explore `rsample` using the bootstrap method. Access `bootstraps()` from the `rsample` library using `::`.  
```{r reuse-existing-data--4, exercise = TRUE}

```

```{r reuse-existing-data--4-hint-1, eval = FALSE}
rsample::bootstraps()
```

### 

This will throw an error, because a data frame was not specified. Our data frame is `mtcars`.

### 

### Exercise 5

Using the previous code, enter `mtcars` in `bootstraps()`. 
```{r reuse-existing-data--5, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r reuse-existing-data--5-hint-1, eval = FALSE}
rsample::bootstraps(mtcars)
```

### 

As you can see, this outputs 25 rows of bootstraps. But we only want 3 bootstrap splits.

### 

### Exercise 6

Using the previous code, only produce 3 splits using the `times` parameter in `bootstraps()`.
```{r reuse-existing-data--6, exercise = TRUE}

```

<button onclick = "transfer_code(this)">Copy previous code</button>

```{r reuse-existing-data--6-hint-1, eval = FALSE}
rsample::bootstraps(mtcars, times = ...)
```

### 

One important feature in the tibble produced by `rsample` is that the *splits** column is a list. In this instance, each element of the list has the same type of object: an `rsplit` object that contains the information about which rows of `mtcars` belong in the bootstrap sample. 

### 

Great Job! You understood the meaning and importance of resampling using the bootstrap method. This was achieved using the `bootstrap()` method from the `rsample` library.

### 

## Design for the Pipe and Functional Programming
### 

## Tidyverse Syntax
### 

## Summary
This tutorial covered [Chapter 2: Tidyverse Principles](https://www.tmwr.org/tidyverse.html#tidyverse-principles) 
from [*Tidy Modeling with R*](https://www.tmwr.org/) by Max Kuhn and Julia Silge. We briefly discused the important principles of the [**tidyverse**](https://www.tidyverse.org/packages/) design philosophy and how they apply in the context of modeling software that is easy to use and supports good statistical practices. You have learned the relationship between **tidymodels** and **tidyverse**, as [**tidymodels**](https://www.tidymodels.org/packages/) applies **tidyverse** principles to building models.

### 

<!-- Two to four sentences which bring the lessons of the tutorial together for the student. What do they know now that they did not know before? How does this tutorial connect to other tutorials? OK if this is very similar to the Introduction. You made a promise as to what they would learn. You (we hope!) kept that promise.-->

```{r download-answers, child = system.file("child_documents/download_answers.Rmd", package = "tutorial.helpers")}
```
